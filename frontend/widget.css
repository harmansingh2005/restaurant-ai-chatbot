:root {
	/* Theme (provided) */
	--chat-accent: #0c0c0b; /* buttons */
	--chat-accent-600: #1a1a19; /* hover */
	--chat-surface: #fbf0de; /* background */

	/* Surfaces and text */
	--chat-bg: #ffffff; /* panel surface */
	--chat-text: #0c0c0b; /* primary text */
	--chat-subtle: #6b6b65; /* secondary text */
	--chat-border: #f1e3cc; /* warm border */

	/* Bubbles */
	--chat-user: #f5e6c9; /* warm tint */
	--chat-assistant: #f8eedb; /* warm tint lighter */

	--chat-shadow: 0 10px 30px rgba(2, 8, 23, 0.15);
	--radius-xl: 16px;
	--radius-lg: 12px;
	--radius-md: 10px;
	--z-floating: 2147483000; /* high but below toasts */
		--bubble-size: 56px; /* bubble diameter */
}

/* Base resets for the demo page */
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
	margin: 0;
	font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
	color: var(--chat-text);
	background: var(--chat-surface);
}

/* Container to scope styles */
#dlanos-chat {
	position: fixed;
	right: 16px;
	bottom: 16px;
	z-index: var(--z-floating);
}

/* Respect safe areas for iOS/Android notches */
@supports (bottom: env(safe-area-inset-bottom)) {
	#dlanos-chat {
		right: calc(16px + env(safe-area-inset-right));
		bottom: calc(16px + env(safe-area-inset-bottom));
	}
}

/* Floating bubble */
.chat-bubble {
	all: unset;
	display: grid; place-items: center;
	width: var(--bubble-size); height: var(--bubble-size);
	background: var(--chat-accent);
	color: #fff;
	border-radius: 50%;
	box-shadow: var(--chat-shadow);
	cursor: pointer;
	transition: transform .15s ease, background .2s ease, box-shadow .2s ease;
}
.chat-bubble:hover { background: var(--chat-accent-600); transform: translateY(-1px); }
.chat-bubble:active { transform: translateY(0); }
.bubble-icon { font-size: 22px; }

/* Panel */
.chat-panel {
	position: fixed; /* anchor to viewport, not the small container */
	right: 16px;
	bottom: calc(var(--bubble-size) + 16px);
	width: min(380px, calc(100vw - 24px));
	max-width: calc(100vw - 24px);
	height: 520px; /* default desktop height */
	display: grid;
	grid-template-rows: auto 1fr auto auto;
	background: var(--chat-bg);
	border: 1px solid var(--chat-border);
	border-radius: var(--radius-xl);
	box-shadow: var(--chat-shadow);
	overflow: hidden;
	transform-origin: 100% 100%;
	transform: scale(.95);
	opacity: 0;
	pointer-events: none;
	transition: opacity .18s ease, transform .18s ease;
	z-index: calc(var(--z-floating) + 1);
}

.chat-panel.open {
	opacity: 1;
	transform: scale(1);
	pointer-events: auto;
}

.chat-header {
	display: flex; align-items: center; justify-content: space-between;
	gap: 8px;
	padding: 12px 12px 12px 14px;
	background: linear-gradient(180deg, #fff, #fff), var(--chat-bg);
	border-bottom: 1px solid var(--chat-border);
}

.chat-title { display: flex; align-items: center; gap: 10px; }
.chat-logo { font-size: 18px; }
.chat-header h2 { font-size: 15px; margin: 0; font-weight: 700; letter-spacing: .2px; }
.chat-close { all: unset; cursor: pointer; padding: 6px; border-radius: 8px; }
.chat-close:hover { background: var(--chat-surface); }

.messages {
	padding: 14px;
	overflow: auto;
	display: grid;
	align-content: start;
	gap: 10px;
	background: linear-gradient(180deg, var(--chat-surface), #fff 160px);
	-webkit-overflow-scrolling: touch; /* smooth iOS scroll */
}

.msg {
	display: grid;
	grid-template-columns: 28px 1fr;
	gap: 8px;
	align-items: start;
}

.msg .avatar {
	width: 28px; height: 28px;
	border-radius: 50%;
	display: grid; place-items: center;
	font-size: 14px;
}
.msg.user .avatar { background: var(--chat-accent); color: #fff; }
.msg.assistant .avatar { background: #e6decc; }

.bubble {
	max-width: 100%;
	padding: 10px 12px;
	border-radius: var(--radius-lg);
	border: 1px solid var(--chat-border);
	line-height: 1.35;
	font-size: 14px;
	background: var(--chat-assistant);
}
.msg.user .bubble { background: var(--chat-user); }

.quick-chips {
	display: flex; gap: 8px; flex-wrap: wrap;
	padding: 10px 12px; border-top: 1px solid var(--chat-border);
	background: #fff;
}
.chip {
	all: unset;
	padding: 8px 12px; border-radius: 999px;
	background: var(--chat-surface);
	border: 1px solid var(--chat-border);
	color: var(--chat-subtle);
	font-size: 12px; cursor: pointer;
}
.chip:hover { color: var(--chat-text); background: #fff; }

.composer {
	display: grid; grid-template-columns: 1fr auto; gap: 8px; align-items: center;
	padding: 10px 12px; border-top: 1px solid var(--chat-border);
	background: #fff;
}
.composer-input {
	width: 100%;
	padding: 12px 12px;
	border-radius: var(--radius-md);
	border: 1px solid var(--chat-border);
	outline: none;
	font-size: 14px;
}
.composer-input:focus { border-color: var(--chat-accent); box-shadow: 0 0 0 3px rgba(12,12,11,.15); }
.composer-send {
	all: unset;
	padding: 12px 16px; border-radius: var(--radius-md);
	background: var(--chat-accent); color: #fff; cursor: pointer;
	font-weight: 600; font-size: 14px;
}
.composer-send:hover { background: var(--chat-accent-600); }

/* Small screens: let panel grow taller */
@media (max-height: 640px) {
	.chat-panel { height: 70vh; }
}

/* Mobile-layout adjustments */
@media (max-width: 600px) {
	:root { --bubble-size: 56px; }

	.chat-panel {
		right: max(8px, env(safe-area-inset-right));
		width: clamp(300px, 90vw, 340px); /* compact width */
		bottom: calc(var(--bubble-size) + max(10px, env(safe-area-inset-bottom)));
		height: clamp(420px, 65dvh, 80dvh); /* not too tall */
		border-radius: var(--radius-xl);
	}

	.chat-header h2 { font-size: 16px; }
	.bubble { font-size: 15px; }
	.chip { font-size: 13px; }

	.composer { padding-bottom: calc(10px + env(safe-area-inset-bottom)); }
}
